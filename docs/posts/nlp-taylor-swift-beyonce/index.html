<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Michael Luu">
<meta name="dcterms.date" content="2020-10-02">
<meta name="description" content="NLP and building a machine learning clasifier on Beyonce and Taylor Swift Lyrics #TidyTuesday">

<title>Michael Luu, MPH - Natural Language Processing (NLP) and developing a machine learning classifier on Beyonce and Taylor Swift lyrics #TidyTuesday</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Michael Luu, MPH</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../presentations.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mluu921"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/miluu/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Natural Language Processing (NLP) and developing a machine learning classifier on Beyonce and Taylor Swift lyrics #TidyTuesday</h1>
                  <div>
        <div class="description">
          NLP and building a machine learning clasifier on Beyonce and Taylor Swift Lyrics #TidyTuesday
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">nlp</div>
                <div class="quarto-category">machine learning</div>
                <div class="quarto-category">tidymodels</div>
                <div class="quarto-category">tidytuesday</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://michaelluu.info">Michael Luu</a> </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 2, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#reading-in-data" id="toc-reading-in-data" class="nav-link active" data-scroll-target="#reading-in-data">Reading in data</a></li>
  <li><a href="#data-pre-processing-and-feature-engineering" id="toc-data-pre-processing-and-feature-engineering" class="nav-link" data-scroll-target="#data-pre-processing-and-feature-engineering">Data pre-processing and feature engineering</a></li>
  <li><a href="#model-building" id="toc-model-building" class="nav-link" data-scroll-target="#model-building">Model building</a>
  <ul class="collapse">
  <li><a href="#model-parameter-tuning" id="toc-model-parameter-tuning" class="nav-link" data-scroll-target="#model-parameter-tuning">Model parameter tuning</a></li>
  </ul></li>
  <li><a href="#final-model" id="toc-final-model" class="nav-link" data-scroll-target="#final-model">Final Model</a></li>
  <li><a href="#closing" id="toc-closing" class="nav-link" data-scroll-target="#closing">Closing</a></li>
  <li><a href="#session-info" id="toc-session-info" class="nav-link" data-scroll-target="#session-info">Session info</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Let’s start off by loading the data from the tidytuesday github repository.</p>
<section id="reading-in-data" class="level1">
<h1>Reading in data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>() <span class="sc">+</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>())</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>beyonce_lyrics <span class="ot">&lt;-</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-09-29/beyonce_lyrics.csv'</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 22616 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): line, song_name, artist_name
dbl (3): song_id, artist_id, song_line

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>taylor_swift_lyrics <span class="ot">&lt;-</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-09-29/taylor_swift_lyrics.csv'</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 132 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (4): Artist, Album, Title, Lyrics

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
<section id="data-pre-processing-and-feature-engineering" class="level1">
<h1>Data pre-processing and feature engineering</h1>
<p>It appears the <strong>beyonce_lyrics</strong> and the <strong>taylor_swift_lyrics</strong> are the pertinent data sets for building our machine learning classifier. Let’s have a closer look at the two datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>beyonce_lyrics </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22,616 × 6
   line                        song_id song_name artist_id artist_name song_line
   &lt;chr&gt;                         &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 If I ain't got nothing, I …   50396 1+1             498 Beyoncé             1
 2 If I ain't got something, …   50396 1+1             498 Beyoncé             2
 3 'Cause I got it with you      50396 1+1             498 Beyoncé             3
 4 I don't know much about al…   50396 1+1             498 Beyoncé             4
 5 And it's me and you           50396 1+1             498 Beyoncé             5
 6 That's all we'll have when…   50396 1+1             498 Beyoncé             6
 7 'Cause baby, we ain't got …   50396 1+1             498 Beyoncé             7
 8 Darling, you got enough fo…   50396 1+1             498 Beyoncé             8
 9 So come on, baby, make lov…   50396 1+1             498 Beyoncé             9
10 When my days look low         50396 1+1             498 Beyoncé            10
# ℹ 22,606 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(beyonce_lyrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 22,616
Columns: 6
$ line        &lt;chr&gt; "If I ain't got nothing, I got you", "If I ain't got somet…
$ song_id     &lt;dbl&gt; 50396, 50396, 50396, 50396, 50396, 50396, 50396, 50396, 50…
$ song_name   &lt;chr&gt; "1+1", "1+1", "1+1", "1+1", "1+1", "1+1", "1+1", "1+1", "1…
$ artist_id   &lt;dbl&gt; 498, 498, 498, 498, 498, 498, 498, 498, 498, 498, 498, 498…
$ artist_name &lt;chr&gt; "Beyoncé", "Beyoncé", "Beyoncé", "Beyoncé", "Beyoncé", "Be…
$ song_line   &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>taylor_swift_lyrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 132 × 4
   artist       album        title                      lyrics                  
   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;                      &lt;chr&gt;                   
 1 Taylor Swift Taylor Swift Tim McGraw                 "He said the way my blu…
 2 Taylor Swift Taylor Swift Picture to Burn            "State the obvious, I d…
 3 Taylor Swift Taylor Swift Teardrops on my Guitar     "Drew looks at me,\nI f…
 4 Taylor Swift Taylor Swift A Place in This World      "I don't know what I wa…
 5 Taylor Swift Taylor Swift Cold As You                "You have a way of comi…
 6 Taylor Swift Taylor Swift The Outside                "I didn't know what I w…
 7 Taylor Swift Taylor Swift Tied Together With A Smile "Seems the only one who…
 8 Taylor Swift Taylor Swift Stay Beautiful             "Cory's eyes are like a…
 9 Taylor Swift Taylor Swift Should’ve Said No          "It's strange to think …
10 Taylor Swift Taylor Swift Mary’s Song                "She said\n\"I was seve…
# ℹ 122 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(taylor_swift_lyrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 132
Columns: 4
$ artist &lt;chr&gt; "Taylor Swift", "Taylor Swift", "Taylor Swift", "Taylor Swift",…
$ album  &lt;chr&gt; "Taylor Swift", "Taylor Swift", "Taylor Swift", "Taylor Swift",…
$ title  &lt;chr&gt; "Tim McGraw", "Picture to Burn", "Teardrops on my Guitar", "A P…
$ lyrics &lt;chr&gt; "He said the way my blue eyes shinx\nPut those Georgia stars to…</code></pre>
</div>
</div>
<p>The <strong>beyonce_lyrics</strong> appears to be structured differently than the <strong>taylor_swift_lyrics</strong>. The lyrics from Taylor Swift is stored 1 line per title/song name, while Beyonce’s lyrics are stored by song lines. This is a problem, and we’ll have to rectify this prior to building our classifier.</p>
<p>My idea of rectifying this would be to collapse the data from Beyonce’s lyrics to get them into the same structure as Taylor Swift’s lyrics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>beyonce_lyrics <span class="ot">&lt;-</span> beyonce_lyrics <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    artist_name, song_name</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">lyrics =</span> <span class="fu">paste0</span>(line, <span class="at">collapse =</span> <span class="st">' '</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'artist'</span> <span class="ot">=</span> artist_name,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'title'</span> <span class="ot">=</span> song_name,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    lyrics</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'artist_name'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>beyonce_lyrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 391 × 3
   artist  title                                                lyrics          
   &lt;chr&gt;   &lt;chr&gt;                                                &lt;chr&gt;           
 1 Beyoncé "\"Self-Titled\" Part 1 . The Visual Album"          "I see music. I…
 2 Beyoncé "\"Self-Titled\" Part 2 . Imperfection"              "There's a mome…
 3 Beyoncé "***Flawless (Ft.&nbsp;Chimamanda&nbsp;Ngozi Adichie)"         "Your challenge…
 4 Beyoncé "***Flawless (Remix) (Ft.&nbsp;Nicki&nbsp;Minaj)"              "Dum-da-de-da D…
 5 Beyoncé "1+1"                                                "If I ain't got…
 6 Beyoncé "2017 Grammy's Best Urban Contemporary Album Speech" "Thank you so m…
 7 Beyoncé "6 Inch (Ft.&nbsp;The&nbsp;Weeknd)"                            "Six inch heels…
 8 Beyoncé "7/11"                                               "Shoulders side…
 9 Beyoncé "7/11 (Homecoming Live)"                             "Goddamn, godda…
10 Beyoncé "A Woman Like Me"                                    "Do you think Y…
# ℹ 381 more rows</code></pre>
</div>
</div>
<p>Okay - this appears to be much better, and will allow us to merge them together with the Taylor Swift data. Our outcome <em>y</em> that we are trying to predict will be the ‘artist’ column. The features <em>x</em> will be the song lyrics. In order to get them to a usable state for our model, we will have to perform some preprocessing and feature engineering.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>taylor_swift_lyrics <span class="ot">&lt;-</span> taylor_swift_lyrics <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    artist, title, lyrics</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  taylor_swift_lyrics, beyonce_lyrics</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 523 × 3
   artist       title                      lyrics                               
   &lt;chr&gt;        &lt;chr&gt;                      &lt;chr&gt;                                
 1 Taylor Swift Tim McGraw                 "He said the way my blue eyes shinx\…
 2 Taylor Swift Picture to Burn            "State the obvious, I didn't get my …
 3 Taylor Swift Teardrops on my Guitar     "Drew looks at me,\nI fake a smile s…
 4 Taylor Swift A Place in This World      "I don't know what I want, so don't …
 5 Taylor Swift Cold As You                "You have a way of coming easily to …
 6 Taylor Swift The Outside                "I didn't know what I would find\nWh…
 7 Taylor Swift Tied Together With A Smile "Seems the only one who doesn't see …
 8 Taylor Swift Stay Beautiful             "Cory's eyes are like a jungle\nHe s…
 9 Taylor Swift Should’ve Said No          "It's strange to think the songs we …
10 Taylor Swift Mary’s Song                "She said\n\"I was seven, and you we…
# ℹ 513 more rows</code></pre>
</div>
</div>
<p>After merging the data together, we will split our data into a separate training and testing dataset.</p>
</section>
<section id="model-building" class="level1">
<h1>Model building</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(data, <span class="at">strata =</span> artist)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">training</span>(splits)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">testing</span>(splits)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The data has now been split, where 75% of the data we have available will be used to train our classifier, and the remaining 25% will be left for validation of the model and to estimate the overall performance.</p>
<p>We will next create a ‘recipe’ and perform feature engineering on our training data. We will do this in various steps, including tokenizing the lyrics, removing stop words, excluding words that appear less than 20 times, performing term-frequency inverse-document-frequency (TF-IDF), and finally normalization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span> <span class="fu">recipe</span>(artist <span class="sc">~</span> lyrics, <span class="at">data =</span> train) <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_tokenize</span>(lyrics) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_stopwords</span>(lyrics) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_tokenfilter</span>(lyrics, <span class="at">min_times =</span> <span class="dv">20</span>, <span class="at">max_tokens =</span> <span class="dv">500</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_tfidf</span>(lyrics) <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>rec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Inputs </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>outcome:   1
predictor: 1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Operations </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Tokenization for: lyrics</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Stop word removal for: lyrics</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Text filtering for: lyrics</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Term frequency-inverse document frequency with: lyrics</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Centering and scaling for: all_predictors()</code></pre>
</div>
</div>
<p>Now that we have a ‘recipe’ for pre-processing our data into a usable state to feed into our model, we will create a specification of the classifier. In this instance we will be building a support vector machine (SVM) classifier from the kernlab package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>svm_spec <span class="ot">&lt;-</span> <span class="fu">svm_rbf</span>(<span class="at">cost =</span> <span class="fu">tune</span>(), <span class="at">rbf_sigma =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">'kernlab'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">'classification'</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>svm_spec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Radial Basis Function Support Vector Machine Model Specification (classification)

Main Arguments:
  cost = tune()
  rbf_sigma = tune()

Computational engine: kernlab </code></pre>
</div>
</div>
<section id="model-parameter-tuning" class="level2">
<h2 class="anchored" data-anchor-id="model-parameter-tuning">Model parameter tuning</h2>
<p>The model parameters cost and rbf_sigma will be tuned via a grid search of 10 values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>svm_wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(svm_spec) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>svm_tune_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(train, <span class="at">strata =</span> artist)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>svm_tune_res <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  svm_wf,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> svm_tune_folds,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> <span class="dv">10</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>tune_metrics <span class="ot">&lt;-</span> svm_tune_res <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>()</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>tune_metrics <span class="sc">%&gt;%</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(., .metric <span class="sc">==</span> <span class="st">'accuracy'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(.,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">y =</span> rbf_sigma, <span class="at">x =</span> cost, <span class="at">color =</span> mean)) <span class="sc">+</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_c</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>svm_tune_res <span class="sc">%&gt;%</span> <span class="fu">show_best</span>(<span class="at">metric =</span> <span class="st">'accuracy'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
    cost rbf_sigma .metric  .estimator  mean     n std_err .config              
   &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;                
1 3.15    2.37e- 4 accuracy binary     0.804    10 0.0150  Preprocessor1_Model04
2 0.439   8.95e- 2 accuracy binary     0.747    10 0.00199 Preprocessor1_Model01
3 0.0342  4.45e- 3 accuracy binary     0.747    10 0.00199 Preprocessor1_Model02
4 0.0177  4.34e- 8 accuracy binary     0.747    10 0.00199 Preprocessor1_Model03
5 0.0856  8.84e-10 accuracy binary     0.747    10 0.00199 Preprocessor1_Model05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>best_accuracy <span class="ot">&lt;-</span> svm_tune_res <span class="sc">%&gt;%</span> <span class="fu">select_best</span>(., <span class="at">metric =</span> <span class="st">'accuracy'</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>best_accuracy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
   cost rbf_sigma .config              
  &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;                
1  3.15  0.000237 Preprocessor1_Model04</code></pre>
</div>
</div>
</section>
</section>
<section id="final-model" class="level1">
<h1>Final Model</h1>
<p>The optimal tuning parameters for accuracy appears to be 3.154 for cost and 0 for rbf_sigma. We will use these parameters for our final model. We will fit our final model on the full training data, and assess the performance on the test data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>svm_final_wf <span class="ot">&lt;-</span> <span class="fu">finalize_workflow</span>(</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  svm_wf,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  best_accuracy</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>final_res <span class="ot">&lt;-</span> svm_final_wf <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(splits)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>final_metrics <span class="ot">&lt;-</span> final_res <span class="sc">%&gt;%</span> <span class="fu">collect_metrics</span>()</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>final_metrics</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric  .estimator .estimate .config             
  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 accuracy binary         0.802 Preprocessor1_Model1
2 roc_auc  binary         0.892 Preprocessor1_Model1</code></pre>
</div>
</div>
<p>Our final model using the tuned parameters optimizing for accuracy allowed us to achieve a model accuracy of 80.2% and ROC of 0.89</p>
<p>Let’s have a closer look at the performance of the model via a confusion matrix</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>final_preds <span class="ot">&lt;-</span> final_res <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_predictions</span>()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>final_preds <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    ., artist, .pred_class</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              Truth
Prediction     Beyoncé Taylor Swift
  Beyoncé           96           24
  Taylor Swift       2            9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>final_preds <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">conf_mat</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    ., artist, .pred_class</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 3
   .metric              .estimator .estimate
   &lt;chr&gt;                &lt;chr&gt;          &lt;dbl&gt;
 1 accuracy             binary         0.802
 2 kap                  binary         0.324
 3 sens                 binary         0.980
 4 spec                 binary         0.273
 5 ppv                  binary         0.8  
 6 npv                  binary         0.818
 7 mcc                  binary         0.395
 8 j_index              binary         0.252
 9 bal_accuracy         binary         0.626
10 detection_prevalence binary         0.916
11 precision            binary         0.8  
12 recall               binary         0.980
13 f_meas               binary         0.881</code></pre>
</div>
</div>
</section>
<section id="closing" class="level1">
<h1>Closing</h1>
<p>The model appears to be doing a decent job classifying the artist by the lyrics of the songs with an overall accuracy of 80.2%. Furthermore, the model appears to be doing a better job at classifying Beyonce lyrics than Taylor Swift’s</p>
<p>Let’s have a closer look at the songs that were misclassified from our model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(., <span class="sc">-</span>artist) <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(final_preds) <span class="sc">%&gt;%</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    artist, title,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    .pred_Beyoncé, <span class="st">`</span><span class="at">.pred_Taylor Swift</span><span class="st">`</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    .pred_class</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    artist <span class="sc">!=</span> .pred_class</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(.pred_Beyoncé, <span class="st">`</span><span class="at">.pred_Taylor Swift</span><span class="st">`</span>), <span class="sc">~</span> <span class="fu">paste0</span>(<span class="fu">format</span>(<span class="fu">round</span>(.x<span class="sc">*</span><span class="dv">100</span>, <span class="dv">1</span>), <span class="dv">1</span>), <span class="st">'%'</span>))</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(., artist) <span class="sc">%&gt;%</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">artist =</span> <span class="st">'Artist'</span>,</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">'Title'</span>,</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    .pred_Beyoncé <span class="ot">=</span> <span class="st">'% Beyonce'</span>,</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">.pred_Taylor Swift</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'% Taylor'</span>,</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.pred_class =</span> <span class="st">'Prediction'</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="bhfpqtymin" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bhfpqtymin table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bhfpqtymin thead, #bhfpqtymin tbody, #bhfpqtymin tfoot, #bhfpqtymin tr, #bhfpqtymin td, #bhfpqtymin th {
  border-style: none;
}

#bhfpqtymin p {
  margin: 0;
  padding: 0;
}

#bhfpqtymin .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bhfpqtymin .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bhfpqtymin .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bhfpqtymin .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bhfpqtymin .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhfpqtymin .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhfpqtymin .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bhfpqtymin .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bhfpqtymin .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bhfpqtymin .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bhfpqtymin .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bhfpqtymin .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bhfpqtymin .gt_spanner_row {
  border-bottom-style: hidden;
}

#bhfpqtymin .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bhfpqtymin .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bhfpqtymin .gt_from_md > :first-child {
  margin-top: 0;
}

#bhfpqtymin .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bhfpqtymin .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bhfpqtymin .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bhfpqtymin .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bhfpqtymin .gt_row_group_first td {
  border-top-width: 2px;
}

#bhfpqtymin .gt_row_group_first th {
  border-top-width: 2px;
}

#bhfpqtymin .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhfpqtymin .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bhfpqtymin .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bhfpqtymin .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhfpqtymin .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhfpqtymin .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bhfpqtymin .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bhfpqtymin .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bhfpqtymin .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bhfpqtymin .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhfpqtymin .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhfpqtymin .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bhfpqtymin .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bhfpqtymin .gt_left {
  text-align: left;
}

#bhfpqtymin .gt_center {
  text-align: center;
}

#bhfpqtymin .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bhfpqtymin .gt_font_normal {
  font-weight: normal;
}

#bhfpqtymin .gt_font_bold {
  font-weight: bold;
}

#bhfpqtymin .gt_font_italic {
  font-style: italic;
}

#bhfpqtymin .gt_super {
  font-size: 65%;
}

#bhfpqtymin .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bhfpqtymin .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bhfpqtymin .gt_indent_1 {
  text-indent: 5px;
}

#bhfpqtymin .gt_indent_2 {
  text-indent: 10px;
}

#bhfpqtymin .gt_indent_3 {
  text-indent: 15px;
}

#bhfpqtymin .gt_indent_4 {
  text-indent: 20px;
}

#bhfpqtymin .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="Title" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Title</th>
<th id="% Beyonce" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">% Beyonce</th>
<th id="% Taylor" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">% Taylor</th>
<th id="Prediction" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">Prediction</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd gt_group_heading_row">
<td colspan="4" id="Taylor Swift" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Taylor Swift</td>
</tr>
<tr class="even gt_row_group_first">
<td class="gt_row gt_left" headers="Taylor Swift  title">Should’ve Said No</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">50.4%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">49.6%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">I’m Only Me When I’m With You</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">11.4%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">88.6%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">A Perfectly Good Heart</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">34.1%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">65.9%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">Untouchable</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">92.7%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">7.3%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">Hey Stephen</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">50.5%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">49.5%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">Breathe</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">8.9%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">91.1%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">Tell Me Why</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">45.5%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">54.5%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">Better Than Revenge</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">8.4%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">91.6%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">Innocent</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">31.6%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">68.4%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">Ours</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">78.3%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">21.7%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">If This Was a Movie</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">11.1%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">88.9%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">22</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">27.2%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">72.8%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">Sad Beautiful Tragic</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">58.4%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">41.6%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">Come Back Be Here</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">31.9%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">68.1%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">Welcome to New York</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">16.3%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">83.7%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">Out of the Woods</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">26.7%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">73.3%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">How You Get The Girl</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">59.6%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">40.4%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">I Know Places</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">47.7%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">52.3%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">Ready For It</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">85.1%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">14.9%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">False God</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">39.8%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">60.2%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">ME</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">76.7%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">23.3%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">illicit affairs</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">97.3%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">2.7%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Taylor Swift  title">betty</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">14.7%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">85.3%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Taylor Swift  title">peace</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Beyoncé">89.0%</td>
<td class="gt_row gt_right" headers="Taylor Swift  .pred_Taylor Swift">11.0%</td>
<td class="gt_row gt_center" headers="Taylor Swift  .pred_class">Beyoncé</td>
</tr>
<tr class="even gt_group_heading_row">
<td colspan="4" id="Beyoncé" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">Beyoncé</td>
</tr>
<tr class="odd gt_row_group_first">
<td class="gt_row gt_left" headers="Beyoncé  title">Creole</td>
<td class="gt_row gt_right" headers="Beyoncé  .pred_Beyoncé">0.2%</td>
<td class="gt_row gt_right" headers="Beyoncé  .pred_Taylor Swift">99.8%</td>
<td class="gt_row gt_center" headers="Beyoncé  .pred_class">Taylor Swift</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Beyoncé  title">Diamonds</td>
<td class="gt_row gt_right" headers="Beyoncé  .pred_Beyoncé">3.1%</td>
<td class="gt_row gt_right" headers="Beyoncé  .pred_Taylor Swift">96.9%</td>
<td class="gt_row gt_center" headers="Beyoncé  .pred_class">Taylor Swift</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="session-info" class="level1">
<h1>Session info</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.2.2 (2022-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 22621)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] kernlab_0.9-32     stopwords_2.3      gt_0.9.0           future_1.32.0     
 [5] textrecipes_1.0.2  lubridate_1.9.2    forcats_1.0.0      stringr_1.5.0     
 [9] readr_2.1.4        tidyverse_2.0.0    yardstick_1.1.0    workflowsets_1.0.1
[13] workflows_1.1.3    tune_1.1.1         tidyr_1.3.0        tibble_3.2.1      
[17] rsample_1.1.1      recipes_1.0.5      purrr_1.0.1        parsnip_1.1.0     
[21] modeldata_1.1.0    infer_1.0.4        ggplot2_3.4.2      dplyr_1.1.1       
[25] dials_1.2.0        scales_1.2.1       broom_1.0.4        tidymodels_1.0.0  
[29] tidytuesdayR_1.0.2

loaded via a namespace (and not attached):
 [1] colorspace_2.1-0    ellipsis_0.3.2      class_7.3-20       
 [4] snakecase_0.11.0    fs_1.6.1            rstudioapi_0.14    
 [7] farver_2.1.1        listenv_0.9.0       furrr_0.3.1        
[10] SnowballC_0.7.0     bit64_4.0.5         prodlim_2023.03.31 
[13] fansi_1.0.4         xml2_1.3.3          codetools_0.2-18   
[16] splines_4.2.2       knitr_1.41          jsonlite_1.8.4     
[19] compiler_4.2.2      httr_1.4.5          backports_1.4.1    
[22] Matrix_1.5-1        fastmap_1.1.0       cli_3.6.1          
[25] htmltools_0.5.4     tools_4.2.2         gtable_0.3.3       
[28] glue_1.6.2          Rcpp_1.0.10         cellranger_1.1.0   
[31] DiceDesign_1.9      vctrs_0.6.1         iterators_1.0.14   
[34] timeDate_4022.108   gower_1.0.1         xfun_0.38          
[37] globals_0.16.2      rvest_1.0.3         timechange_0.2.0   
[40] lifecycle_1.0.3     renv_0.16.0         MASS_7.3-58.1      
[43] ipred_0.9-14        vroom_1.6.1         hms_1.1.3          
[46] parallel_4.2.2      yaml_2.3.6          curl_5.0.0         
[49] sass_0.4.5          rpart_4.1.19        stringi_1.7.8      
[52] tokenizers_0.3.0    foreach_1.5.2       lhs_1.1.6          
[55] hardhat_1.3.0       lava_1.7.2.1        rlang_1.1.0        
[58] pkgconfig_2.0.3     evaluate_0.19       lattice_0.20-45    
[61] labeling_0.4.2      htmlwidgets_1.6.2   bit_4.0.5          
[64] tidyselect_1.2.0    parallelly_1.35.0   magrittr_2.0.3     
[67] R6_2.5.1            generics_0.1.3      pillar_1.9.0       
[70] withr_2.5.0         survival_3.4-0      nnet_7.3-18        
[73] future.apply_1.10.0 janitor_2.2.0       crayon_1.5.2       
[76] utf8_1.2.3          tzdb_0.3.0          rmarkdown_2.19     
[79] usethis_2.1.6       grid_4.2.2          readxl_1.4.2       
[82] data.table_1.14.8   digest_0.6.31       GPfit_1.0-8        
[85] munsell_0.5.0       viridisLite_0.4.1  </code></pre>
</div>
</div>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{luu2020,
  author = {Luu, Michael},
  title = {Natural {Language} {Processing} {(NLP)} and Developing a
    Machine Learning Classifier on {Beyonce} and {Taylor} {Swift} Lyrics
    {\#TidyTuesday}},
  date = {2020-10-02},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-luu2020" class="csl-entry quarto-appendix-citeas" role="listitem">
Luu, Michael. 2020. <span>“Natural Language Processing (NLP) and
Developing a Machine Learning Classifier on Beyonce and Taylor Swift
Lyrics #TidyTuesday.”</span> October 2, 2020.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>