{
  "hash": "0170506f1debc5198aea067cb1862fff",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Co-author Network Analysis with networkD3\"\ndate: '01/23/2024'\ncategories:\n  - visualization\n  - networkD3\neditor_options: \n  chunk_output_type: console\nimage: \"image.png\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(igraph)\nlibrary(tidyverse)\nlibrary(RefManageR)\nlibrary(gt)\nlibrary(networkD3)\n```\n:::\n\n\nThis is post was largely inspired by the advent of code 2023 day 25 puzzle which largely involved network analysis. I thought it would be a fun visualization to visualize the network of inter-connected co-authors among the publications I have been a part of.\n\nWe start off with using the `RefManageR` package to query pubmed for all publications with my name and Cedars-Sinai as an affiliation. We then use `tidyverse` to wrangle the data into a format that can be used by `networkD3`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nq <- '(Michael Luu) AND (Cedars-Sinai[Affiliation])'\n\ndata <- RefManageR::ReadPubMed(q, retmax = 999)\n\ndata <- data |> as_tibble()\n\ndata <- data |>\n  select(author) |>\n  mutate(i = row_number(), .before = author) |> \n  separate_wider_delim(\n    author,\n    delim = ' and ',\n    names = paste0('author', 1:30),\n    too_few = 'align_start'\n  ) |> \n  pivot_longer(2:31) |> \n  filter(!is.na(value))\n\ndata\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 761 × 3\n       i name     value               \n   <int> <chr>    <chr>               \n 1     1 author1  Vinicius F Calsavara\n 2     1 author2  Norah L Henry       \n 3     1 author3  Ron D Hays          \n 4     1 author4  Sungjin Kim         \n 5     1 author5  Michael Luu         \n 6     1 author6  Márcio A Diniz      \n 7     1 author7  Gillian Gresham     \n 8     1 author8  Reena S Cecchini    \n 9     1 author9  Greg Yothers        \n10     1 author10 Patricia A Ganz     \n# ℹ 751 more rows\n```\n\n\n:::\n:::\n\n\nNow that we have the data in a tidy format, let's construct a tibble, where all co-authors are connected to all other co-authors for a given publication. Since the list of interconnected co-authors are so large, for simplicity sake we are going to randomly sample 5 publications and visualize the network of co-authors for those publications only.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnd <- data |> \n  group_nest(i) |> \n  deframe() |> \n  map(\\(x) {\n    \n    authors <- x |> pull(value)\n    \n    data <- tidyr::crossing(\n      from = authors,\n      to = authors\n    )\n    \n    data <- data |> \n      filter(from != to)\n    \n    return(data)\n    \n  }) |> \n  bind_rows(.id = 'id')\n\nselected_publications <- nd |> pull(id) |> unique() |> sample(5)\n\nnd <- nd |> filter(id %in% selected_publications) |> select(-id)\n```\n:::\n\n\nThe following is the interactive network of co-authors for the selected publications!\n\n\n::: {.cell .preview-image}\n\n```{.r .cell-code}\nig <- graph_from_data_frame(nd)\n\nn <- networkD3::igraph_to_networkD3(ig)\n\nforceNetwork(\n  Links = n$links,\n  Nodes = n$nodes,\n  Source = 'source',\n  Target = 'target',\n  NodeID = 'name',\n  Group = 'name',\n  zoom = TRUE,\n  opacity = .9,\n  charge = -100,\n  height = 800,\n  fontSize = 20\n)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"htmlwidget-01e1d7cecfa5fa8619b7\" style=\"width:100%;height:773px;\" class=\"forceNetwork html-widget \"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-01e1d7cecfa5fa8619b7\">{\"x\":{\"links\":{\"source\":[14,7,4,5,3,13,11,6,2,8,9,9,6,10,1,1,12,8,7,20,8,16,19,18,17,0,23,24,2,25,9,3,22,6,6,0,3,9,12,8,14,8,13,10,4,11,8,10,9,7,21,5,7,8,27,29,28,22,8,1,14,1,6,3,7,9,13,23,8,0,24,12,25,9,21,11,8,18,15,17,20,19,29,8,28,26,24,1,23,8,25,22,3,9,10,3,5,9,7,1,6,0,8,4,8,14,0,9,10,12,6,1,7,13,8,4,21,9,2,7,6,5,24,1,23,22,8,0,10,1,9,25,9,8,1,5,7,2,0,6,3,2,6,3,1,7,0,8,4,9,14,9,6,13,10,11,8,7,1,0,16,18,20,8,15,19,12,11,9,7,0,1,8,3,2,0,4,13,9,7,14,10,8,1,5,0,0,4,5,6,9,13,12,6,10,11,9,1,14,3,2,1,8,8,20,15,19,16,17,8,29,27,26,8,1,0,20,1,6,2,9,4,10,22,3,25,29,9,23,7,27,21,5,24,18,1,28,11,0,12,16,13,10,9,26,14,6,17,3,7,19,15,18,16,17,15,20,8,23,21,10,8,24,3,9,1,25,9,6,12,1,8,14,0,7,11,10,8,28,26,27,9,10,8,1,22,3,25,24,21,22,3,8,1,9,21,25,23,10,15,17,18,8,16,19,22,10,21,8,1,3,9,24,23,9,1,11,8,10,6,7,13,0,12,0,10,14,13,6,1,0,8,2,21,3,5,6,10,1,8,4,22,23,7,3,8,12,1,7,25,11,24],\"target\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,15,15,15,15,15,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,26,26,26,26,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,16,16,16,16,16,16,27,27,27,27,21,21,21,21,21,21,21,21,21,2,2,2,2,2,2,2,2,2,11,11,11,11,11,11,11,11,11,11,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,12,12,12,12,12,12,12,12,12,12,17,17,17,17,17,17,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,18,18,18,18,18,18,28,28,28,28,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,19,19,19,19,19,19,22,22,22,22,22,22,22,22,22,13,13,13,13,13,13,13,13,13,13,29,29,29,29,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,20,20,20,20,20,20,25,25,25,25,25,25,25,25,25,14,14,14,14,14,14,14,14,14,14,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],\"colour\":[\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\",\"#666\"]},\"nodes\":{\"name\":[\"Alain C Mita\",\"Allen S Ho\",\"Christopher Gay\",\"Diana J Lu\",\"Eric M Anderson\",\"Eric M Chung\",\"Jon Mallen-St Clair\",\"Kevin S Scher\",\"Michael Luu\",\"Zachary S Zumsteg\",\"Anthony T Nguyen\",\"De-Chen Lin\",\"Evan S Walgama\",\"Mourad Tighiouart\",\"Sungjin Kim\",\"Alice Chung\",\"Armando E Giuliano\",\"Farin Amersi\",\"Marissa K Srour\",\"Minna Lee\",\"Sarah Wolcott-Sapp\",\"Christopher A Barker\",\"Moses Tam\",\"Nima M Gharavi\",\"Omid Hamid\",\"Stephen L Shiao\",\"Andrew J Solomon\",\"Barbara S Giesser\",\"Marwa Kaisey\",\"Nancy L Sicotte\"],\"group\":[\"Alain C Mita\",\"Allen S Ho\",\"Christopher Gay\",\"Diana J Lu\",\"Eric M Anderson\",\"Eric M Chung\",\"Jon Mallen-St Clair\",\"Kevin S Scher\",\"Michael Luu\",\"Zachary S Zumsteg\",\"Anthony T Nguyen\",\"De-Chen Lin\",\"Evan S Walgama\",\"Mourad Tighiouart\",\"Sungjin Kim\",\"Alice Chung\",\"Armando E Giuliano\",\"Farin Amersi\",\"Marissa K Srour\",\"Minna Lee\",\"Sarah Wolcott-Sapp\",\"Christopher A Barker\",\"Moses Tam\",\"Nima M Gharavi\",\"Omid Hamid\",\"Stephen L Shiao\",\"Andrew J Solomon\",\"Barbara S Giesser\",\"Marwa Kaisey\",\"Nancy L Sicotte\"]},\"options\":{\"NodeID\":\"name\",\"Group\":\"name\",\"colourScale\":\"d3.scaleOrdinal(d3.schemeCategory20);\",\"fontSize\":20,\"fontFamily\":\"serif\",\"clickTextSize\":50,\"linkDistance\":50,\"linkWidth\":\"function(d) { return Math.sqrt(d.value); }\",\"charge\":-100,\"opacity\":0.9,\"zoom\":true,\"legend\":false,\"arrows\":false,\"nodesize\":false,\"radiusCalculation\":\" Math.sqrt(d.nodesize)+6\",\"bounded\":false,\"opacityNoHover\":0,\"clickAction\":null}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/d3-4.5.0/d3.min.js\"></script>\n<script src=\"../../site_libs/forceNetwork-binding-0.4/forceNetwork.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}